const express=require("express");
const app=express();

const port= 3100;
let inputHandler=((req,res,next)=>{
    if(req.query.name){
        if(/^[a-zA-Z]*$/.test(req.query.name)){
        next()
        }else{
            res.send("Only alphabetic characters are allowed")
        }
    }else{
        res.send("name is required")
    }
})

app.get("/",(req,res)=>{res.send("helllo")});

app.get("/home",(req,res)=>{
    res.send({"name":"Ramakrishna","city":"hyd"});
});
app.get(/.*script$/,inputHandler,(req,res)=>{
    
    console.log(req.query)

    let name = req.query.name;
    let city = req.query.city;
    let role = req.query.role;
    let age = req.query.age

    res.send({"name":name, "greeting":`hello ${name}`,"city":city,"role":role,"age":age})});

app.listen(port,()=>{
    console.log("server running");
})

